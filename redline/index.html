<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="google_style.css" />
        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=true">
        </script>
        <script type="text/javascript" >
            var myLat = 42.3581;
            var myLng = -71.0636;
            //Maybe just find the lat, lang of Boston instead of getting mine
            var me = new google.maps.LatLng(myLat, myLng);
            var myOptions = {
                        zoom: 13, // The larger the zoom number, the bigger the zoom
                        center: me,
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    };
            function initialize() {
                map = new google.maps.Map(document.getElementById("map-canvas"), myOptions);
                getMyLocation();
            }

             
            function markTrains () {
                var length = redline.TripList.Trips.length;
                for(i = 0; i < length; i++){
                    if(redline.TripList.Trips[i].hasOwnProperty("Position")){
                        var lat = redline.TripList.Trips[i].Position.Lat;
                        var lng = redline.TripList.Trips[i].Position.Long;
                        var position = new google.maps.LatLng(lat, lng);

                        var marker = new google.maps.Marker({
                        map: map,
                        position: position,
                        })
                    }
                }
                
            }
            

            /*
            Tried to implement finding "me" however Chrome was not liking it
             */
            function getMyLocation() {
                getTrains();
            }
            function getTrains() {
                // request = new XMLHttpRequest();
                // request.open("GET", "file:///Users/alexkasemir/Documents/jcollege/comp20/comp20-akasemir/redline/red.txt", false);
                // request.onreadystatechange = function () 
                // {
                //     if (request.readystate == 4 && request.status == 200)
                //     {
                //         alert("I somehow did it");
                //         trains = JSON.parse(request.responseText);
                //         markTrains();
                //     }
                // }
                // request.send(null);
                var redjson = '{ "TripList": {"CurrentTime": 1413335903,"Line": "Red", "Trips": [{"TripID": "23850926", "Destination": "Braintree", "Position": {"Timestamp": 1413335863, "Train": "1809", "Lat": 42.36243, "Long": -71.08581,"Heading": 95}, "Predictions": [{"StopID": "70073", "Stop": "Charles/MGH", "Seconds": 103}, {"StopID": "70075", "Stop": "Park Street", "Seconds": 229}, {"StopID": "70077", "Stop": "Downtown Crossing", "Seconds": 321}, {"StopID": "70079", "Stop": "South Station", "Seconds": 408}, {"StopID": "70081", "Stop": "Broadway", "Seconds": 554}, {"StopID": "70083", "Stop": "Andrew", "Seconds": 680}, {"StopID": "70095", "Stop": "JFK/UMass", "Seconds": 849}]}, {"TripID": "23850840", "Destination": "Alewife", "Position": {"Timestamp": 1413335806, "Train": "1606", "Lat": 42.35526, "Long": -71.06016,"Heading": 310}, "Predictions": [{"StopID": "70076", "Stop": "Park Street", "Seconds": -2}, {"StopID": "70074", "Stop": "Charles/MGH", "Seconds": 123}, {"StopID": "70072", "Stop": "Kendall/MIT", "Seconds": 262}, {"StopID": "70070", "Stop": "Central Square", "Seconds": 417}, {"StopID": "70068", "Stop": "Harvard Square", "Seconds": 619}, {"StopID": "70066", "Stop": "Porter Square", "Seconds": 800}, {"StopID": "70064", "Stop": "Davis", "Seconds": 921}, {"StopID": "70061", "Stop": "Alewife", "Seconds": 1084}]}, {"TripID": "23850931", "Destination": "Braintree", "Position": {"Timestamp": 1413335877, "Train": "1739", "Lat": 42.38826, "Long": -71.11895,"Heading": 180}, "Predictions": [{"StopID": "70067", "Stop": "Harvard Square", "Seconds": 136}, {"StopID": "70069", "Stop": "Central Square", "Seconds": 345}, {"StopID": "70071", "Stop": "Kendall/MIT", "Seconds": 499}, {"StopID": "70073", "Stop": "Charles/MGH", "Seconds": 642}, {"StopID": "70075", "Stop": "Park Street", "Seconds": 768}, {"StopID": "70077", "Stop": "Downtown Crossing", "Seconds": 860}, {"StopID": "70079", "Stop": "South Station", "Seconds": 947}, {"StopID": "70081", "Stop": "Broadway", "Seconds": 1093}]}, {"TripID": "23850852", "Destination": "Ashmont", "Position": {"Timestamp": 1413335810, "Train": "1621", "Lat": 42.37396, "Long": -71.11874,"Heading": 130}, "Predictions": [{"StopID": "70069", "Stop": "Central Square", "Seconds": 117}, {"StopID": "70071", "Stop": "Kendall/MIT", "Seconds": 271}, {"StopID": "70073", "Stop": "Charles/MGH", "Seconds": 414}, {"StopID": "70075", "Stop": "Park Street", "Seconds": 540}, {"StopID": "70077", "Stop": "Downtown Crossing", "Seconds": 632}, {"StopID": "70079", "Stop": "South Station", "Seconds": 719}, {"StopID": "70081", "Stop": "Broadway", "Seconds": 865}, {"StopID": "70083", "Stop": "Andrew", "Seconds": 991}, {"StopID": "70085", "Stop": "JFK/UMass", "Seconds": 1168}]}, {"TripID": "23850890", "Destination": "Alewife", "Position": {"Timestamp": 1413335857, "Train": "1870", "Lat": 42.36203, "Long": -71.08088,"Heading": 275}, "Predictions": [{"StopID": "70072", "Stop": "Kendall/MIT", "Seconds": 2}, {"StopID": "70070", "Stop": "Central Square", "Seconds": 157}, {"StopID": "70068", "Stop": "Harvard Square", "Seconds": 361}, {"StopID": "70066", "Stop": "Porter Square", "Seconds": 542}, {"StopID": "70064", "Stop": "Davis", "Seconds": 663}, {"StopID": "70061", "Stop": "Alewife", "Seconds": 826}]}, {"TripID": "23850909", "Destination": "Alewife", "Position": {"Timestamp": 1413335856, "Train": "1876", "Lat": 42.27315, "Long": -71.02737,"Heading": 315}, "Predictions": [{"StopID": "70098", "Stop": "North Quincy", "Seconds": -19}, {"StopID": "70096", "Stop": "JFK/UMass", "Seconds": 488}, {"StopID": "70084", "Stop": "Andrew", "Seconds": 652}, {"StopID": "70082", "Stop": "Broadway", "Seconds": 782}, {"StopID": "70080", "Stop": "South Station", "Seconds": 934}, {"StopID": "70078", "Stop": "Downtown Crossing", "Seconds": 1015}, {"StopID": "70076", "Stop": "Park Street", "Seconds": 1110}]}, {"TripID": "23850914", "Destination": "Braintree", "Position": {"Timestamp": 1413335847, "Train": "1730", "Lat": 42.24367, "Long": -71.00469,"Heading": 195}, "Predictions": [{"StopID": "70103", "Stop": "Quincy Adams", "Seconds": 30}, {"StopID": "70105", "Stop": "Braintree", "Seconds": 286}]}, {"TripID": "23850872", "Destination": "Ashmont", "Predictions": [{"StopID": "70063", "Stop": "Davis", "Seconds": 22}, {"StopID": "70065", "Stop": "Porter Square", "Seconds": 140}, {"StopID": "70067", "Stop": "Harvard Square", "Seconds": 302}, {"StopID": "70069", "Stop": "Central Square", "Seconds": 512}, {"StopID": "70071", "Stop": "Kendall/MIT", "Seconds": 666}]}, {"TripID": "23850883", "Destination": "Ashmont", "Position": {"Timestamp": 1413335821, "Train": "1868", "Lat": 42.3617, "Long": -71.0776,"Heading": 95}, "Predictions": [{"StopID": "70075", "Stop": "Park Street", "Seconds": 84}, {"StopID": "70077", "Stop": "Downtown Crossing", "Seconds": 176}, {"StopID": "70079", "Stop": "South Station", "Seconds": 263}, {"StopID": "70081", "Stop": "Broadway", "Seconds": 409}, {"StopID": "70083", "Stop": "Andrew", "Seconds": 535}, {"StopID": "70085", "Stop": "JFK/UMass", "Seconds": 712}, {"StopID": "70087", "Stop": "Savin Hill", "Seconds": 858}, {"StopID": "70089", "Stop": "Fields Corner", "Seconds": 1039}, {"StopID": "70091", "Stop": "Shawmut", "Seconds": 1157}]}, {"TripID": "23850920", "Destination": "Braintree", "Position": {"Timestamp": 1413335803, "Train": "1851", "Lat": 42.31602, "Long": -71.05206,"Heading": 170}, "Predictions": [{"StopID": "70097", "Stop": "North Quincy", "Seconds": 282}, {"StopID": "70099", "Stop": "Wollaston", "Seconds": 409}, {"StopID": "70101", "Stop": "Quincy Center", "Seconds": 579}, {"StopID": "70103", "Stop": "Quincy Adams", "Seconds": 753}, {"StopID": "70105", "Stop": "Braintree", "Seconds": 1009}]}, {"TripID": "23850839", "Destination": "Alewife", "Position": {"Timestamp": 1413335838, "Train": "1849", "Lat": 42.32455, "Long": -71.0545,"Heading": 310}, "Predictions": [{"StopID": "70084", "Stop": "Andrew", "Seconds": 11}, {"StopID": "70082", "Stop": "Broadway", "Seconds": 141}, {"StopID": "70080", "Stop": "South Station", "Seconds": 293}, {"StopID": "70078", "Stop": "Downtown Crossing", "Seconds": 374}, {"StopID": "70076", "Stop": "Park Street", "Seconds": 469}, {"StopID": "70074", "Stop": "Charles/MGH", "Seconds": 594}, {"StopID": "70072", "Stop": "Kendall/MIT", "Seconds": 733}, {"StopID": "70070", "Stop": "Central Square", "Seconds": 888}, {"StopID": "70068", "Stop": "Harvard Square", "Seconds": 1092}]}, {"TripID": "23850862", "Destination": "Ashmont", "Predictions": [{"StopID": "70061", "Stop": "Alewife", "Seconds": 340}, {"StopID": "70063", "Stop": "Davis", "Seconds": 425}, {"StopID": "70065", "Stop": "Porter Square", "Seconds": 543}, {"StopID": "70067", "Stop": "Harvard Square", "Seconds": 705}, {"StopID": "70069", "Stop": "Central Square", "Seconds": 915}, {"StopID": "70071", "Stop": "Kendall/MIT", "Seconds": 1069}]}, {"TripID": "23850841", "Destination": "Alewife", "Position": {"Timestamp": 1413335841, "Train": "1878", "Lat": 42.39676, "Long": -71.12241,"Heading": 285}, "Predictions": [{"StopID": "70061", "Stop": "Alewife", "Seconds": 101}]}, {"TripID": "23850936", "Destination": "Alewife", "Position": {"Timestamp": 1413335810, "Train": "1819", "Lat": 42.37407, "Long": -71.11876,"Heading": 350}, "Predictions": [{"StopID": "70066", "Stop": "Porter Square", "Seconds": 88}, {"StopID": "70064", "Stop": "Davis", "Seconds": 209}, {"StopID": "70061", "Stop": "Alewife", "Seconds": 372}]}, {"TripID": "23850935", "Destination": "Braintree", "Predictions": [{"StopID": "70061", "Stop": "Alewife", "Seconds": 611}, {"StopID": "70063", "Stop": "Davis", "Seconds": 696}, {"StopID": "70065", "Stop": "Porter Square", "Seconds": 813}, {"StopID": "70067", "Stop": "Harvard Square", "Seconds": 975}, {"StopID": "70069", "Stop": "Central Square", "Seconds": 1185}]}, {"TripID": "23850845", "Destination": "Ashmont", "Position": {"Timestamp": 1413335855, "Train": "1506", "Lat": 42.29076, "Long": -71.0653,"Heading": 160}, "Predictions": [{"StopID": "70093", "Stop": "Ashmont", "Seconds": 54}]}, {"TripID": "23850903", "Destination": "Alewife", "Position": {"Timestamp": 1413335826, "Train": "1804", "Lat": 42.33107, "Long": -71.057,"Heading": 0}, "Predictions": [{"StopID": "70082", "Stop": "Broadway", "Seconds": 37}, {"StopID": "70080", "Stop": "South Station", "Seconds": 189}, {"StopID": "70078", "Stop": "Downtown Crossing", "Seconds": 270}, {"StopID": "70076", "Stop": "Park Street", "Seconds": 365}, {"StopID": "70074", "Stop": "Charles/MGH", "Seconds": 490}, {"StopID": "70072", "Stop": "Kendall/MIT", "Seconds": 629}, {"StopID": "70070", "Stop": "Central Square", "Seconds": 784}, {"StopID": "70068", "Stop": "Harvard Square", "Seconds": 988}, {"StopID": "70066", "Stop": "Porter Square", "Seconds": 1169}]}, {"TripID": "23850919", "Destination": "Alewife", "Predictions": [{"StopID": "70105", "Stop": "Braintree", "Seconds": 697}, {"StopID": "70104", "Stop": "Quincy Adams", "Seconds": 934}, {"StopID": "70102", "Stop": "Quincy Center", "Seconds": 1119}]}, {"TripID": "23850913", "Destination": "Alewife", "Predictions": [{"StopID": "70104", "Stop": "Quincy Adams", "Seconds": 213}, {"StopID": "70102", "Stop": "Quincy Center", "Seconds": 397}, {"StopID": "70100", "Stop": "Wollaston", "Seconds": 562}, {"StopID": "70098", "Stop": "North Quincy", "Seconds": 685}, {"StopID": "70096", "Stop": "JFK/UMass", "Seconds": 1192}]}, {"TripID": "23850866", "Destination": "Alewife", "Predictions": [{"StopID": "70094", "Stop": "Ashmont", "Seconds": 411}, {"StopID": "70092", "Stop": "Shawmut", "Seconds": 483}, {"StopID": "70090", "Stop": "Fields Corner", "Seconds": 593}, {"StopID": "70088", "Stop": "Savin Hill", "Seconds": 767}, {"StopID": "70086", "Stop": "JFK/UMass", "Seconds": 899}]}, {"TripID": "23850859", "Destination": "Alewife", "Position": {"Timestamp": 1413335828, "Train": "1619", "Lat": 42.28643, "Long": -71.06448,"Heading": 330}, "Predictions": [{"StopID": "70092", "Stop": "Shawmut", "Seconds": -3}, {"StopID": "70090", "Stop": "Fields Corner", "Seconds": 107}, {"StopID": "70088", "Stop": "Savin Hill", "Seconds": 281}, {"StopID": "70086", "Stop": "JFK/UMass", "Seconds": 413}, {"StopID": "70084", "Stop": "Andrew", "Seconds": 570}, {"StopID": "70082", "Stop": "Broadway", "Seconds": 700}, {"StopID": "70080", "Stop": "South Station", "Seconds": 852}, {"StopID": "70078", "Stop": "Downtown Crossing", "Seconds": 933}, {"StopID": "70076", "Stop": "Park Street", "Seconds": 1028}, {"StopID": "70074", "Stop": "Charles/MGH", "Seconds": 1153}]}, {"TripID": "23850889", "Destination": "Braintree", "Predictions": [{"StopID": "70061", "Stop": "Alewife", "Seconds": 1065}, {"StopID": "70063", "Stop": "Davis", "Seconds": 1150}]}]}}'
                redline = JSON.parse(redjson);
                markTrains();

            }
            google.maps.event.addDomListener(window, 'load', initialize);

        </script>
    </head>
    <body>
    <div id="map-canvas"></div>
    </body>
</html>